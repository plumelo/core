# Settings
set main-view-author-display = email-user
set main-view-date         = custom
set main-view-date-local   = yes
set main-view-date-format = "%Y-%m-%d %H:%M"

set blame-options              = -C -C -C
set show-notes                 = yes
set show-changes               = yes
set status-show-untracked-dirs = yes
set refresh-mode               = periodic
set refresh-interval           = 5

# Bindings

# branch
bind refs n !@git branch "%(prompt Enter branch name: )"
bind main <C-n> !@git branch "%(prompt Enter branch name: )" %(commit)

#Fetch
bind generic <Ctrl-f> ?git fetch -p %(remote)
bind main    <Ctrl-f> ?git fetch -p %(remote)

# reset
bind main   H ?git reset --hard %(commit)
bind diff   H ?git reset --hard %(commit)
bind refs   H ?git reset --hard %(branch)
bind status H ?git reset --hard HEAD

# rebase
bind refs <Ctrl-R> ?git rebase %(branch)

# rebase interactive
bind main B ?git rebase -i %(branch)
bind main <Ctrl-B> ?git rebase -i %(commit)
bind refs B ?git rebase -i %(branch)
bind main <Ctrl-a> ?git rebase --abort
bind refs <Ctrl-a> ?git rebase --abort

# push
bind generic P ?git push -u %(remote) %(repo:head)
bind status P ?git push -u %(remote) %(repo:head)
bind main   w !?git push -f %(remote) %(repo:head)
bind status w !?git push -f %(remote) %(repo:head)

# pull
bind main <Ctrl-p> ?git pull --ff-only

# commit
bind status a ?git commit --amend
bind status + ?git commit --amend --allow-empty

# revert commit
bind main ! !?git revert %(commit)

# chunk under cursor on diff (stage or unstage)
bind stage 1 stage-update-line

# tag the selected commit
bind main T !?@git tag %(prompt) %(commit)

# add current file to gitignore
bind status <Ctrl-r> ?sh -c "echo %(file) >> .gitignore"

# copy sha to clipboard
bind generic 9 !sh -c "echo -n %(commit) | xclip -selection c && echo Copied %(commit) to clipboard"

# COLORS

# Try to mimic gitk's colors.

color date      default default

# general
color   default                 15      235
color   cursor                  default 241
color   title-focus             default 237
color   title-blur              default 237
color   delimiter               default default
color   author                  156     default
color   date                    81      default
color   line-number             221     default
color   mode                    255     default

# main
color   main-tag                213     default     bold
color   main-local-tag          213     default
color   main-remote             221     default
color   main-replace            81      default
color   main-tracked            221     default     bold
color   main-ref                81      default
color   main-head               213     default     bold
color   graph-commit            226     default

# status
#color  stat-head       81      default

# Diff   colors
color   diff_add                10      default
color   diff_add2               10      default
color   diff_del                196     default
color   diff_del2               196     default
color   diff-header             221     default
color   diff-index              81      default
color   diff-chunk              213     default
color   diff_oldmode            221     default
color   diff_newmode            221     default
color   'deleted file mode'     221     default
color   'copy from'             223     default
color   'copy to'               221     default
color   'rename from'           221     default
color   'rename to'             221     default
color   diff_similarity         221     default
color   'dissimilarity'         221     default
color   'diff_tree'             81      default
color   diff-stat               81      default
color   "Reported-by:"          156     default

color   'Author:'               156     default
color   'Commit:'               213     default
color   'AuthorDate:'           221     default
color   'CommitDate:'           221     default
color   'Date:'                 81      default
color   pp_refs                 213     default

# status
color   status.header           221     default
color   status.section          81      default
color   stat_staged             213     default
color   stat_unstaged           213     default
color   stat_untracked          213     default

# raw commit header
color   commit                  156     default
color   committer               213     default

# commit message
color   'Signed-off-by'         221     default
color   'Acked-by'              221     default
color   'Tested-by'             221     default
color   'Reviewed-by'           221     default

# tree
color   tree.directory         221     default
